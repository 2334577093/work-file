<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="css/layui.css" media="all">
    <link rel="stylesheet" href="css/public.css" media="all">
    <link rel="stylesheet" href="css/login.css" media="all">
    <link rel="stylesheet" href="css/layer.css" id="layui_layer_skinlayercss" style="">
    <link rel="stylesheet" type="text/css" href="css/context.standalone.css">
    <link rel="stylesheet" href="css/move.css">
    <script type="text/javascript" src="js/context.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/layer.js"></script>
    <script src="js/tinyselect.js"></script>
    <link rel="stylesheet" href="http://www.jq22.com/demo/jQuery-picture20160604/js/layer/skin/layer.ext.css" id="layui_layer_skinlayerextcss"
        style="">
    <link rel="stylesheet" type="text/css" href="css/formSelects-v4.css" />
</head>

<body>
    <div class="head">
        head
    </div>
    <div class="move_minWidth">
        <div class="move_head clearfix">
            <div class="move_headL fl">
                展会供应链
            </div>
            <div class="move_headR fr clearfix">
                <p class="move_headR_date fl">
                    <span>布展日期</span>2019-12-1到 2019-12-03
                </p>
                <p class="move_headR_date fl">
                    <span>开展日期</span>2019-12-04到 2019-12-12
                </p>
            </div>
        </div>
        <div class="move_slide clearfix">
            <div class="move_slideL">
                A001馆
            </div>
            <div class="move_slideR clearfix">
                <p class="move_slideR_unApply move_slideR_normal fl clearfix">
                    <span class="fl"></span>生鲜区
                </p>
                <p class="move_slideR_doingApply move_slideR_normal fl clearfix">
                    <span class="fl"></span>干果区
                </p>
                <p class="move_slideR_alreadyApply move_slideR_normal fl clearfix">
                    <span class="fl"></span>水产区
                </p>
            </div>
        </div>
        <div class="move_wrap">
            <div class="move_l">
                <div id="canvas" style=" min-width:100%;">
                    <img class="move_bg_img" src="images/demo_picture.jpg" />
                    <div class="move_fixed">
                    </div>
                    <div class="move_user_zw" style="background: #cfddc7">
                    </div>
                </div>
                <input type="hidden" id="move_val" style="background:#cfddc7!important">
                <input type="hidden" id="walkways_val">
                <input type="hidden" id="move_spacing">
            </div>
            <div class="move_r">
                <ul class="layui-tab-title headbigBox" id="hideBox">
                    <span class="zgInBox">
                        <li class="this">A1</li>
                        <li>A2</li>
                        <li>A2</li>
                        <li>A2</li>
                        <li>A2</li>
                        <li>A2</li>
                        <li>A2</li>
                        <li>A2</li>
                        <li>A2</li>
                        <li>A2</li>
                    </span>
                    <div class="middenSmill">
                        <img src="images/zwchoose.png" alt="">
                        <p>
                            大厅
                        </p>
                    </div>
                </ul>
                <div class="clear">
                </div>
                <div class="move_zoom clearfix">
                    <div class="move_big move_zoom_normal">
                    </div>
                    <div class="move_small move_zoom_normal">
                    </div>
                    <div class="move_zoom_LR move_zoom_normal">
                    </div>
                    <div id="smileBox">
                        关闭
                    </div>
                </div>
                <div class="move_overflow">
                    <div class="move_a clearfix">
                        <div class="move_aL fl">
                            展位报价
                        </div>
                        <!-- <div class="move_aR fr">清空
                </div>
                 -->
                    </div>
                    <div class="move_b">
                        <div class="move_cTop clearfix">
                            <div class="move_cTit fl">
                                基本信息
                            </div>
                        </div>
                        <p class="move_bBox clearfix">
                            <span class="move_b_l fl">展馆号</span><span class="move_b_r fr" id="area">A001
                            </span>
                        </p>
                        <p class="move_bBox clearfix">
                            <span class="move_b_l fl">展位号</span><input class="move_b_r fr move_r_input" id="exhibitionNumber"
                                type="text" placeholder="请输入">
                        </p>
                    </div>
                    <div class="move_c">
                        <p class="move_bBox clearfix">
                            <span class="move_b_l fl">输入展位长度</span><input id="long" class="move_b_r fr move_l_inputW move_r_input "
                                type="text" placeholder="请输入">
                        </p>
                        <p class="move_bBox clearfix">
                            <span class="move_b_l fl">输入展位宽度</span><input id="wide" class="move_b_r fr move_l_inputH move_r_input "
                                type="text" placeholder="请输入">
                        </p>
                        <div class="move_margin10">
                            <button class="move_submit">添加展位</button>
                        </div>
                        <div class="move_sizes">
                        </div>
                    </div>
                    <div class="move_d">
                        <div class="move_cTop clearfix">
                            <div class="move_cTit fl">
                                面积
                            </div>
                            <div class="move_cR fr">
                                <span id="lw">0</span>m<span class="move_rSquare">2</span>
                            </div>
                        </div>
                        <div class="move_cTop clearfix" id="biaozhuiIn">
                            <div class="move_cTit fl">
                                单价/元
                            </div>
                            <div class="move_dR fr">
                                <input type="text" id="price" placeholder="0">
                            </div>
                        </div>
                        <div class="move_cTop clearfix " id="tezhaungIn" style="display:none">
                            <div class="move_cTit fl">
                                单位/个
                            </div>
                            <div class="move_dR fr">
                                <input type="text" id="price" placeholder="0">
                            </div>
                        </div>
                        <div class="move_cBox clearfix">
                            <div class="move_cTit fl">
                                展位类型
                            </div>
                            <div class="move_lin">
                                <span class="move_dBottom">
                                    <label id="tezhaung">
                                        <input type="radio" name="standard" value="1" checked="" class="move_dRadioA">
                                        <span class="move_dRadio"></span>特装
                                    </label>
                                    <input class="move_dText" type="text" value="100">
                                </span>
                            </div>
                            <div class="move_rin">
                                <span class="move_dBottom">
                                    <label id="biaozhui">
                                        <input type="radio" name="standard" value="2" class="move_dRadioA">
                                        <span class="move_dRadio"></span>标准
                                    </label>
                                    <input class="move_dText" type="text" placeholder="请输入">
                                </span>
                            </div>
                        </div>
                    </div>
                    <?php  if($_COOKIE['rlRole'] == 4){?>
                    <div class="move_e">
                        <div class="move_cTop clearfix">
                            <div class="move_cTit">
                                选择公司
                            </div>
                        </div>
                        <div class="move_margin10">
                            <div class="cell">
                                <select name="exhi" class="exhi" id="select1">
                                    <?php foreach ($csl as $key =>
                             $value) {?>
                                    <option value="<?php echo $value['slId']; ?>">
                                        <?php echo $value['slCompanyName']; ?>
                                    </option>
                                    <?php }?>
                                </select>
                            </div>
                        </div>
                    </div>
                    <?php }?>
                </div>
                <div class="move_g">
                    <p class="move_gTop">
                        合计：<span id="allPrice">0</span>
                    </p>
                    <input class="move_all_submit" lay-submit="" lay-filter="orderSave" type="submit" value="生成展位" />
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<!-- <script src="js/layui.js" type="text/javascript" charset="utf-8"></script>
 -->
<script src="js/formSelects-v4.js" type="text/javascript" charset="utf-8"></script>
<script>
    //所有用户展区
    var allBoxs = [];
    //图片比例/实际尺寸
    var bgImg_height = 750;
    var shiji_height = 4680;
    var normal_height = 120.19;
    var rate = shiji_height / bgImg_height;
    // var rate = 4;
    $(function () {
        // add wushijie
        /* $(".move_fAdd").click(function () {
             var move_fBox = $(this).parents(".move_cTop").siblings(".move_fBox");
             if (move_fBox.is(":hidden")) {
                 move_fBox.show();
                 $(this).css({ background: "url(/public/web/images/reduce.png) center center no-repeat", backgroundSize: "24px" });
             } else {
                 move_fBox.hide();
                 $(this).css({ background: "url(/public/web/images/addW.png) center center no-repeat", backgroundSize: "24px" });
             }
         });*/
        //右侧信息高度
        // var ss=$("html,body").height();
        // alert(ss);  //1057px
        $(window).resize(function () {
            $(".move_r").css({ 'height': $("html,body").height() - 114 + "px" });
        });
        $(".move_r").css({ 'height': $("html,body").height() - 114 + "px" });
        //图片比例/实际尺寸
        // $("#walkways_val").val(JSON.stringify(walkways));
        // $("#move_spacing").val(JSON.stringify(3 * rate));
        // for (var i = 0; i < walkways.length; i++) {
        //     console.log(walkways[0]);
        //     var walkway = walkways[i]
        //     $("#canvas").append(`<div class="walkway"  style="cursor: not-allowed;z-index:1001;position:absolute;left:${walkway.x}px;top:${walkway.y}px;width:${walkway.w}px;height:${walkway.h}px;background: transparent;"></div>`);
        // }
        // 背景图实际高是4000px，在页面上展示是1000px，rate=4000/1000；页面通道位置=实际的通道位置/4
        // {"l":129.333332,"t":101.333332,"r":1754.666664,"b":740}
        function changeRefresh() {

            //可选择区域

            var walkways = [{
                l: 17.95 * rate,
                t: 14.42 * rate,
                r: 24.36 * rate,
                b: 60.42 * rate,
                w: 6.41 * rate,
                h: 46 * rate,
            }, {
                l: 33.81 * rate,
                t: 14.42 * rate,
                r: 76.60 * rate,
                b: 60.42 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 85.90 * rate,
                t: 14.42 * rate,
                r: 128.69 * rate,
                b: 60.42 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 137.98 * rate,
                t: 14.42 * rate,
                r: 180.77 * rate,
                b: 60.42 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 190.06 * rate,
                t: 14.42 * rate,
                r: 232.85 * rate,
                b: 60.42 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 242.15 * rate,
                t: 14.42 * rate,
                r: 257.85 * rate,
                b: 60.42 * rate,
                w: 15.72 * rate,
                h: 46 * rate,
            }, {
                l: 17.95 * rate,
                t: 69.40 * rate,
                r: 24.36 * rate,
                b: 115.70 * rate,
                w: 6.41 * rate,
                h: 46 * rate,
            }, {
                l: 33.81 * rate,
                t: 69.40 * rate,
                r: 76.60 * rate,
                b: 115.70 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 85.90 * rate,
                t: 69.40 * rate,
                r: 128.69 * rate,
                b: 115.70 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 137.98 * rate,
                t: 69.40 * rate,
                r: 180.77 * rate,
                b: 115.70 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 190.06 * rate,
                t: 69.40 * rate,
                r: 232.85 * rate,
                b: 115.70 * rate,
                w: 42.79 * rate,
                h: 46 * rate,
            }, {
                l: 242.15 * rate,
                t: 69.40 * rate,
                r: 257.85 * rate,
                b: 115.70 * rate,
                w: 15.72 * rate,
                h: 46 * rate,
            }
            ];
            $("#walkways_val").val(JSON.stringify(walkways));
            // start
            // walkways = JSON.stringify(walkways);
            // console.log(walkways);
            // localStorage.setItem("walkways",walkways);
            // var newWalkways = localStorage.getItem("walkways");
            // console.log(newWalkways); // 打印出原先对象
            // end
            var move_fixed = '';
            for (var i = 0; i < walkways.length; i++) {
                var walkway = walkways[i]
                move_fixed += `<div class="walkway"  style="background:transparent;z-index:0;position:absolute;left:${walkway.l}px;top:${walkway.t}px;width:${walkway.w}px;height:${walkway.h}px;"></div>`;
            }
            $(".move_fixed").html(move_fixed);
            var users = '';
            for (var j = 0; j < allBoxs.length; j++) {
                var allBox = allBoxs[j];
                $('.box[rel=' + allBox.rel + ']').css({
                    width: $('.box[rel=' + allBox.rel + ']').attr('data_width') * rate,
                    height: $('.box[rel=' + allBox.rel + ']').attr('data_height') * rate,
                    top: (allBox.top) * rate,
                    left: (allBox.left) * rate,
                    background: "red"
                });
                // var allBox = allBoxs[j];
                // var l = (allBox.left) * rate;
                // var t = (allBox.top) * rate;
                // var w = (allBox.width) * rate;
                // var h = (allBox.height) * rate;
                // var user_area = parseInt(allBox.width * allBox.height);
                // users += `<div class="box" rel="${allBox.rel}" style="width:${w}px;height:${h}px;left:${l}px;top:${t}px;" ><pre style="transform: translate(-50%, -50%);-webkit-transform: translate(-50%, -50%);-o-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);" class="content">${user_area}</pre><div class="bg transparent" style="background-color:${allBox.color}"></div></div>'`;
            }
            // $(".move_user_zw").html(users);
        }
        changeRefresh()
        // //推拉
        $(".move_zoom_LR").click(function () {
            var move_r = $(this).parents(".move_r");
            if (move_r.width()) {
                move_r.css({ width: 0 });
                $(this).css({ background: `url(images/zoom.svg) center center no-repeat`, backgroundSize: '22px' });
                $('#smileBox').hide()
            } else {
                move_r.css({ width: `350px` });
                $(this).css({ background: `url(images/sx.svg) center center no-repeat`, backgroundSize: '24px' });
                $('#smileBox').show()
            }
        });
        // //放大缩小
        $(".move_big").click(function () {
            changeBigSmall('big');
        });
        //放大缩小
        $(".move_small").click(function () {
            changeBigSmall('small');
        });
        function changeBigSmall(sizes) {
            var ary_user = [];
            var box_user = $(".box_user");
            for (var i = 0; i < box_user.length; i++) {
                var users = {
                    height: parseFloat(box_user.eq(i).css("height")) / rate,
                    width: parseFloat(box_user.eq(i).css("width")) / rate,
                    left: parseFloat(box_user.eq(i).css("left")) / rate,
                    top: parseFloat(box_user.eq(i).css("top")) / rate,
                }
                ary_user.push(users);
            }
            if (sizes == "big") {
                rate += 0.2;
                $(".move_bg_img").height(rate * normal_height);

                changeRefresh();
                for (var j = 0; j < ary_user.length; j++) {
                    $(".box_user").eq(j).css({
                        height: ary_user[j].height * rate,
                        width: ary_user[j].width * rate,
                        left: ary_user[j].left * rate,
                        top: ary_user[j].top * rate,
                    })
                }
            } else {
                if (rate > 2) {
                    rate -= 0.2;
                    $(".move_bg_img").height(rate * normal_height);
                    changeRefresh();
                    for (var j = 0; j < ary_user.length; j++) {
                        $(".box_user").eq(j).css({
                            height: ary_user[j].height * rate,
                            width: ary_user[j].width * rate,
                            left: ary_user[j].left * rate,
                            top: ary_user[j].top * rate,
                        })
                    }
                }
            }

        }
        //初始化计数器
        var num = 0;
        //区块锁定标识
        var lock = false;
        //加载layer拓展
        layer.config({
            extend: 'extend/layer.ext.js'
        });
        //右键菜单参数
        context.init({
            fadeSpeed: 100,
            filter: function ($obj) { },
            above: 'auto',
            preventDoubleContext: true,
            compress: false
        });
        //调试输出方法
        function debug(msg) {
            $("#").text(msg);
        }
        function createBox(data) {
            var dataId = data.id || '';
            var value = data.text || '';
            var color = data.color || '';
            var height = data.height || 0;
            var width = data.width || 0;
            var pageX = data.pageX || 0;
            var pageY = data.pageY || 0;
            //更新计数器并记录当前计数
            var curNum = num++;
            //创建区域块
            var pos = $("#canvas").position();
            var arealist = $("#exhibitionNumber").val();
            // var box = $('<div data_width="'+width+'" data_height="'+height+'" class="box" rel="' + curNum + '" dataId="' + dataId + '">' + arealist + '<pre class="content">' + value + '</pre><div class="bg transparent" style="background-color:' + color + '"></div></div>').css({
            var box = $('<div data_width="' + width + '"  data_height="' + height + '" class="box box_user" rel="' + curNum + '" dataId="' + dataId + '">' + '<em class="emposition">' + arealist + '</em>' + '<pre class="content">' + value + '</pre><div class="bg transparent" style="background-color:' + color + '"></div></div>').css({
                width: width * rate,
                height: height * rate,
                top: pageY > 0 ? pageY : (pos.top > 0 ? 0 : pos.top * -1 + 200),
                left: pageX > 0 ? pageX : (pos.left > 0 ? 0 : pos.left * -1 + 244)
            }).appendTo(".move_user_zw");
            allBoxs.push({ rel: curNum, top: pageY > 0 ? pageY / rate : (pos.top > 0 ? 0 : (pos.top * -1 + 50) / rate), left: pageX > 0 ? pageX / rate : (pos.left > 0 ? 0 : (pos.left * -1 + 30) / rate) });
            // var box = $('<div class="box" rel="' + curNum + '" dataId="' + dataId + '"><pre class="content">' + value + '</pre><div class="bg transparent" style="background-color:' + color + '"></div><div class="coor transparent"></div></div>').css({
            //     width: width,
            //     height: height,
            //     top: pageY > 0 ? pageY : (pos.top > 0 ? 0 : pos.top * -1 + 50),
            //     left: pageX > 0 ? pageX : (pos.left > 0 ? 0 : pos.left * -1 + 30)
            // }).appendTo("#canvas");
            //计算文本位置
            box.find('.content').css({
                marginLeft: box.find('.content').width() / 2 * -1,
                marginTop: box.find('.content').height() / 2 * -1
            });
            //创建右键菜单
            context.attach('.box[rel=' + curNum + ']', [
                { header: '操作' },
                {
                    text: '编辑区域说明', action: function (e) {
                        e.preventDefault();
                        layer.prompt({
                            title: '请输入区域说明',
                            formType: 2,
                            value: $('.box[rel=' + curNum + '] .content').text()
                        }, function (value, index, elem) {
                            layer.close(index);
                            var curCont = $('.box[rel=' + curNum + '] .content');
                            curCont.text(value).css({
                                marginLeft: curCont.width() / 2 * -1,
                                marginTop: curCont.height() / 2 * -1
                            });
                        });
                    }
                },
                // {
                //  text: '更改区域尺寸', action: function (e) {
                //     e.preventDefault();
                //     layer.prompt({
                //         title: '请输入区域尺寸（宽,高），最小值：3',
                //         formType: 0,
                //         value: $('.box[rel=' + curNum + ']').attr("data_width")*1+ "," + $('.box[rel=' + curNum + ']').attr("data_height")*1
                //     }, function (value, index, elem) {
                //         var reg = /^[0-9]+,[0-9]+$/;
                //         if (!reg.test(value)) {
                //             layer.msg('输入格式不正确，例：3,3');
                //             return;
                //         }
                //         var size = value.split(',');
                //         var w_size = size[0] < 3 ? 3 : size[0] * 1;
                //         var h_size = size[1] < 3 ? 3 : size[1] * 1;
                //         var box = $('.box[rel=' + curNum + ']');
                //         box.children(".content").text(w_size * h_size);
                //         $('.move_cChang').html(w_size);
                //         $('.move_ckuan').html(h_size);
                //         $('.box[rel=' + curNum + ']').attr("data_width",w_size);
                //         $('.box[rel=' + curNum + ']').attr("data_height",h_size);
                //             // $(".move_l_inputW").val(w_size);
                //             // $(".move_l_inputH").val(h_size);
                //             box.css({
                //                 width: w_size * rate,
                //                 height: h_size * rate
                //             });
                //             layer.close(index);
                //         });
                // }
                // },
                {
                    text: '删除区域', action: function (e) {
                        //
                        whArys = [];
                        for (var i = 0; i < allBoxs.length; i++) {
                            var allBox = allBoxs[i];
                            if (allBox.rel == curNum) {
                                allBoxs.splice(i, 1);
                                i--;
                            }
                        }
                        e.preventDefault();
                        $('.box[rel=' + curNum + ']').remove();
                        $('.move_cBox').remove();
                    }
                },
                { divider: true },
                // { header: '更改颜色' },
                // {
                //     text: '<font color="#fdfaef">未预定</font>', action: function (e) {
                //         e.preventDefault();
                //         $('.box[rel=' + curNum + '] .bg').css('background-color', '#fdfaef');
                //     }
                // },
                // {
                //     text: '<font color="#cfddc7">申请中</font>', action: function (e) {
                //         e.preventDefault();
                //         $('.box[rel=' + curNum + '] .bg').css('background-color', '#cfddc7');
                //     }
                // },
                // {
                //     text: '<font color="#f3c6c7">已申请</font>', action: function (e) {
                //         e.preventDefault();
                //         $('.box[rel=' + curNum + '] .bg').css('background-color', '#f3c6c7');
                //     }
                // }
            ]);
        }
        //添加指定区域
        var whArys = [];
        $(".move_submit").click(function () {
            // if ($(".move_sizes .move_cBox").length) {
            //     layer.msg('只能添加一个展位');
            //     return;
            // }
            var w = $(".move_l_inputW").val(), h = $(".move_l_inputH").val(), is_whTrue = true;
            var reg = /^[0-9]+$/;
            if (!reg.test(w)) {
                layer.msg('输入长度格式不正确（最小值为3）');
                return;
            }
            if (!reg.test(h)) {
                layer.msg('输入宽度格式不正确 （最小值为3）');
                return;
            }
            //
            $("#lw").html(Number(w) * Number(h));
            //实际尺寸500米高
            var w = w < 3 ? 3 : w * 1;
            var h = h < 3 ? 3 : h * 1;
            for (var i = 0; i < Math.max(whArys.length, 1); i++) {
                var wh = whArys[i];
                if (wh && wh.w == w && wh.h == h) {
                    whArys[i].index += 1;
                    is_whTrue = false;
                }
            }
            if (is_whTrue) {
                whArys.push({ w: w, h: h, index: 1 });
            }
            // for(var i=0;i<Math.max(whArys.length,1);i++){
            // var wh=whArys[i];
            // if(!(wh&&wh.w==w &&wh.h==h)){
            // whArys.push({w:w,h:h,index:1});
            // }else{
            // whArys[i].index+=1;
            // }
            // }
            createBox({
                text: w * h,
                width: w,
                height: h
            });
            var whBox = '';
            for (var j = 0; j < whArys.length; j++) {
                var wh = whArys[j];
                whBox += `<div class="move_cBox clearfix">
                <span class="move_cBottom"> <span class="move_cChang">${wh.w}</span>&nbsp;x&nbsp;<span class="move_ckuan">${wh.h}</span></span>x${wh.index} 
                </div>`;
            }
            // <span class="shanchu" id="shanchu">   删除展位</span>
            $(".move_sizes").html(whBox);
            //清空输入框内容
            // $(".move_l_inputW").val('');
            // $(".move_l_inputH").val('');
            $(".move_submit").addClass("no");
        });
        //锁定区域
        $('#btn_lock').click(function () {
            if (lock) {
                $(this).val("锁定区域");
                lock = false;
                $('.box .coor').show();
            } else {
                $(this).val("解锁区域");
                lock = true;
                $('.box .coor').hide();
            }
        });
        //获取所有区块
        $('#btn_save').click(function () {
            var data = [];
            $('.box').each(function () {
                var box = {};
                box['id'] = $(this).attr('dataId');
                box['text'] = $(this).find('.content').text();
                box['color'] = $(this).find('.bg').css('background-color');
                box['height'] = $(this).height();
                box['width'] = $(this).width();
                box['pageX'] = $(this).position().left;
                box['pageY'] = $(this).position().top;
                //console.dir(box);
                data.push(box);
            });
        });
        //创建拖拽方法
        $("#canvas").mousedown(function (e) {
            var canvas = $(this);
            e.preventDefault();
            var pos = $(this).position();
            this.posix = { 'x': e.pageX - pos.left, 'y': e.pageY - pos.top };
            $.extend(document, {
                'move': true, 'move_target': this, 'call_down': function (e, posix) {
                    canvas.css({
                        'cursor': 'move',
                        'top': e.pageY - posix.y,
                        'left': e.pageX - posix.x
                    });
                }, 'call_up': function () {
                    canvas.css('cursor', 'default');
                }
            });
        }).on('mousedown', '.box', function (e) {
            //console.log(1111);
            if (lock) return;
            // 新加
            // $(this).css({
            //     cursor: 'move',
            // });
            var pos = $(this).position();

            this.posix = { 'x': e.pageX - pos.left, 'y': e.pageY - pos.top };
            if ($(this).attr("id") != "canvas") {
                $("#move_val").val(JSON.stringify(pos));
            }
            $.extend(document, { 'move': true, 'move_target': this });
            e.stopPropagation();
        }).on('mousedown', '.box .coor', function (e) {
            var $box = $(this).parent();
            var posix = {
                'w': $box.width(),
                'h': $box.height(),
                'x': e.pageX,
                'y': e.pageY
            };
            $.extend(document, {
                'move': true, 'call_down': function (e) {
                    $box.css({
                        'width': Math.max(30, e.pageX - posix.x + posix.w),
                        'height': Math.max(30, e.pageY - posix.y + posix.h)
                    });
                }
            });
            e.stopPropagation();
        });
        // //测试加载
        // var loadData = [{ id: 1001, text: "C16\n16.5", color: "rgb(255, 0, 0)", height: 12, width: 10, pageX: 627, pageY: 364 },
        // { id: 1002, text: "C17\n16.18", color: "rgb(255, 255, 0)", height: 12, width: 10, pageX: 709, pageY: 364 },
        // { id: 1003, text: "C18\n16.08", color: "rgb(128, 0, 128)", height: 12, width: 10, pageX: 790, pageY: 364 },
        // var loadData = [
        // <?php if (count($order) > 0) {?
        //   <?php foreach ($order as $key => $value) {?>
        //       { id: <?php echo $value['oid']; ?>, text: "<?php echo $value['boothNumber']; ?>\n<?php echo $value['boothArea']; ?>", color: "#f3c6c7", height: <?php echo $value['h']; ?>, width: <?php echo $value['w']; ?>, pageX: <?php echo $value['locationX']; ?>, pageY: <?php echo $value['locationY']; ?> },
        //   <?php }}?>
        //   ];
        //   $.each(loadData, function (i, row) {
        //     createBox(row);
        // });
    });
</script>
<script type="text/javascript" src="js/drag.js"></script>
<ul class="dropdown-menu dropdown-context" id="dropdown-1568792064214">
    <li class="nav-header">操作</li>
    <li><a tabindex="-1" href="#" id="event-93192523782568450">编辑区域说明</a></li>
    <!-- <li><a tabindex="-1" href="#" id="event-464362451007344">更改区域尺寸</a></li>
 -->
    <li><a tabindex="-1" href="#" id="event-126135588339078640">删除区域</a></li>
    <li class="divider"></li>
    <!-- <li class="nav-header">更改颜色</li>
<li><a tabindex="-1" href="#" id="event-50678258842401360"><font color="orange">橙色</font></a></li>
<li><a tabindex="-1" href="#" id="event-90569503451318110"><font color="#ddd">蓝色</font></a></li>
<li><a tabindex="-1" href="#" id="event-90842473270491700"><font color="green">绿色</font></a></li>
<li><a tabindex="-1" href="#" id="event-32914826299315896"><font color="purple">紫色</font></a></li>
<li><a tabindex="-1" href="#" id="event-4607542292602392"><font color="yellow">黄色</font></a></li>
 -->
</ul>
</body>

</html>
<script>
    $("#select1").tinyselect();
</script>
<script>
    function fun() {
        var select = document.getElementById("test");
        var str = [];
        for (i = 0; i < select.length; i++) {
            if (select.options[i].selected) {
                str.push(select[i].value);
            }
        }
        alert(str);
    }
    function fun2() {
        var select = document.getElementById("test2");
        var str = [];
        for (i = 0; i < select.length; i++) {
            if (select.options[i].selected) {
                str.push(select[i].value);
            }
        }
        alert(str);
    }
</script>
<script>
    $(document).ready(function () {
        $('#smileBox').click(function () {
            if ($("#hideBox").css('display') == 'none') {
                $("#hideBox").css("display", "block");
                $("#smileBox").text('关闭');
            } else {
                $("#hideBox").css("display", "none");
                $("#smileBox").text('打开');
            }
        })
    });
</script>